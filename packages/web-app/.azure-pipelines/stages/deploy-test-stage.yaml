parameters:
  - name: workingDirectory
    type: string
    default: ""
  - name: context
    type: string
    default: "deploy-preview"

stages:
  - stage: DeployDev
    displayName: Deployment Test
    jobs:
      - deployment: DeployTest
        displayName: Deployment Test
        variables:
          - group: Netlify
          - group: DevOps Access Tokens
        environment: Netlify Test
        strategy:
          runOnce:
            deploy:
              steps:
                - template: ../steps/deploy-steps.yaml
                  parameters:
                    workingDirectory: ${{ parameters.workingDirectory }}
                    siteId: b32d496d-3b42-4727-bd8c-5798a32b1ad4
                    siteName: test
                    context: "${{ parameters.context }}"
